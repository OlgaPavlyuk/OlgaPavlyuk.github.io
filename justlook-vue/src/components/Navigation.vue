<template>
<div class="header">

  <header class="navbar" :class="menuOpen">

    <div class="nav__logo">
      <router-link :to="{name: 'mainPage'}" class="logo"  @click.native="closeMenu">
        <svg viewBox="25 23 58.166 58.094">
          <g id="logoJA" class="cls-2" transform="translate(25 23)">
            <g id="logoJA-2" data-name="logoJA" transform="translate(-0.008 -0.01)">
              <path id="Path_1660" data-name="Path 1660" class="cls-3" d="M412.453,305.211c-.3-2.859-.637-6.813-2.438-6.627a1.581,1.581,0,0,0-1.177,1.042c-.014.036-.025.073-.036.109a2.768,2.768,0,0,0-.09.3v.034C408.266,302.193,409.9,304.052,412.453,305.211Z" transform="translate(-387.967 -269.321)"/>
              <path id="Path_1661" data-name="Path 1661" class="cls-3" d="M454.671,334.362c1.736.267,2.527-3.6,2.881-5.583a15.424,15.424,0,0,0-.281-4.959,12.974,12.974,0,0,1-4.142,1.34C452.915,327.693,452.629,334.048,454.671,334.362Z" transform="translate(-419.857 -287.474)"/>
              <path id="Path_1662" data-name="Path 1662" class="cls-3" d="M456.679,306.9s.025-1.171,2.247-.893a2.766,2.766,0,0,1,.281.07v-.2c-.331-1.648-4.389-3.165-5.386,4.552v.073a8.469,8.469,0,0,0,3.853-1.488C457.378,307.825,457.007,306.949,456.679,306.9Z" transform="translate(-420.461 -273.616)"/>
              <path id="Path_1663" data-name="Path 1663" class="cls-3" d="M469.009,268.47c-2.115.34-3.69,1.3-3.651,3.485a2.1,2.1,0,0,0,2.553,1.713,2.441,2.441,0,0,0,1.811-3.036A22.405,22.405,0,0,0,469.009,268.47Z" transform="translate(-428.758 -247.668)"/>
              <path id="Path_1664" data-name="Path 1664" class="cls-3" d="M409.262,327.617c2.3-.239,1.859-8.425,1.685-10.581a9.784,9.784,0,0,1-4.316-3.305,38.754,38.754,0,0,0-.014,7.936C406.863,323.812,407.526,327.8,409.262,327.617Z" transform="translate(-386.371 -280.218)"/>
              <path id="Path_1665" data-name="Path 1665" class="cls-3" d="M391.1,216.441a4.052,4.052,0,0,0,.23-.359c1.474-2.564.067-5.372-.23-5.9a2.85,2.85,0,0,0-3.187-1.4,6.947,6.947,0,0,0-1.662-4.667,5.091,5.091,0,0,0-3.171-1.573,6.561,6.561,0,0,0,.093-1.067c0-4.148-3.859-7.043-9.382-7.043-6.65,0-12.075,1.853-16.849,3.488-1.056.362-2.07.71-3.047,1.019a3.069,3.069,0,0,0-.4-.067,3.137,3.137,0,0,1-.416-.076,30.838,30.838,0,0,0-5.352-.626,8.054,8.054,0,0,0-3.03.489,3.926,3.926,0,0,0-2.606,3.693c0,.183-.02.43-.039.691a6.075,6.075,0,0,0,.969,4.493,13.527,13.527,0,0,0-3.7,2.331,12.654,12.654,0,0,0-4.268,9.582c0,4.041,1.379,7.563,3.743,9.708,1.528,8.658,5.529,13.9,10.879,14.218a15.625,15.625,0,0,0,.43,2.794c.963,3.979,4.544,6.358,9.573,6.358.416,0,.842-.017,1.286-.048,3.064-.219,9.525-2.687,16.5-5.456a19.964,19.964,0,0,0,3.974.444c4.948,0,6.712-2.716,6.712-5.254a3.867,3.867,0,0,0-.407-1.735c3.875-.031,4.808-4.423,5.114-5.869a8.723,8.723,0,0,0-1.047-6.844,4.592,4.592,0,0,0-.345-.416,5.994,5.994,0,0,0,1.75-3.785A10.212,10.212,0,0,0,391.1,216.441Zm-6.074-6.262c-.062.862-.213,1.935-.393,3.089,2.379-.32,3.962-.868,3.962-1.713,0,0,2.359,4.269-2.887,4.386a11,11,0,0,1-1.472-.169c-.562,3.595-.972,7.113.421,7.122,0,0-.239,1.081-.775,1.042-3.575-.256-3.294-5.19-3.238-5.7.022-.208.2-1.57.354-2.935-.576-.067-1.171-.129-1.772-.174l.067.227c.907,3.286.177,5.869-2.968,6.74s-5.246-.814-5.3-3.387c-.048-2.247,1.744-3.805,3.87-4.555-.531-1.4-1.151-3.05-1.758-5.089-1.028,3.96-3,9.781-4.162,11.618-2.115,3.37-5.336,2.227-5.591-1.573-.039-.593.031-2.047.149-3.814-.823,2.965-1.991,5.67-3.468,5.788-1.323.1-3.415.154-3.651-3.718-.02-.334.722-5.807.416-8.486-.281-2.432-.969-2.808-.969-2.808,3.794-2.263,4.819-.632,5.147,2.367.2,1.8-.9,11.4-.163,11.275.418-.067,1.831-3.179,2.859-6.785.281-3.7.593-7.7.5-8.186-.16-.842.039-.351-.416-1.019,0,0,4.681-1.463,4.549,2.856-.18,5.821-2.452,14.055-.477,13.628,1.092-.236,3.757-8.262,4.8-12.918-.449-2.126.059-4.212,1.98-4.212,2.393,0,1.988,1.814,1.988,1.814s-1.365-.07-.927,1.514a40.9,40.9,0,0,0,2.982,7.226c.865,0,1.707-.034,2.527-.07.028-.281.051-.539.065-.739.413-5.782-.02-6.459-.562-7.08C380.7,205.742,385.511,203.419,385.028,210.179Zm-34.822,30.357c-5.2,0-7.863-6.793-8.756-12.918-1.9-1.25-3.53-4.117-3.53-8.144,0-8.234,8.986-11.376,11.036-9.323,0,0,.2-.216-1.064,1.4-2.075,3.058-2.954,6.818-3.038,14.774v.66c6.79-1.733,5.982-17.459,5.74-20.7a9.722,9.722,0,0,1-3.089.418c-3.42-.253-2.553-2.586-2.553-4.344,0-2.527,7.827-.626,8.273-.626a11.746,11.746,0,0,1-2.143.379c-2.659-.66-5.274-.531-5.274.18,0,.388.351.769,1.716.769,7.287,0,15.1-5.76,26.263-5.76,3.5,0,6.518,1.542,6.518,4.181a4.211,4.211,0,0,1-2.446,3.583s1.269-3.5-5.3-3.5a53.623,53.623,0,0,0-18.034,3.485c.02,9.9-.34,22.151-9.629,23.2.317,6.158,2.44,11.019,4.684,11.019.635,0,1.662-1.533,1.662-3.71,0-3.993-1.326-5.147-1.326-5.147a2.4,2.4,0,0,1,1.379-1.042c.472-3.766,2.247-6.945,6.686-7.405a1.238,1.238,0,0,1-.112.761c1.9-.281,4.575.842,5.122,5.9.1.865.16,1.8.183,2.775q.562.09,1.163.135c.025-.4.056-.806.1-1.216.6-5.959,4.3-6.956,6.54-6.931h.171a3.931,3.931,0,0,1,3.814,4.19c1.281,1.264,1.786,4.047,1.21,7.759s-2.429,8.127-6.518,7.61c-3.6-.455-5.493-4.743-5.35-10.548-.376-.028-.753-.07-1.123-.126-.022,5.035-1.233,10.6-5.271,11.017-2.4.247-4.3-1.4-5.456-4.066A2.339,2.339,0,0,1,350.206,240.535Zm27.689,3.651a4.449,4.449,0,0,1,2.19-.741c2.03.174,4.979.281,4.9-1.019-.039-.649-1.261-.587-3.651.053-1.938.52-16.364,6.846-20.57,7.147-4.415.315-7.178-1.267-7.863-4.131a8.369,8.369,0,0,1-.281-3.721s.873,3,7.554,3c15,0,16.745-3.957,22.446-4.17,1.342-.051,2.671.626,2.671,1.609-.006,3.749-7.4,1.977-7.4,1.977Zm12.469-20.725c-.081,2.123-3.83,4.165-6.908,6.821a.4.4,0,0,1,.062-.017c1.522-.309,3.106,4.075,5.673,4.305.093,0-.213-.031-.2-.1a4.5,4.5,0,0,0-1.7-4.08s.932-1.376,1.716-1.306c.626.056,1.671,2.064,1.064,4.937-.4,1.867-1.008,3.771-2.558,3.586-2.429-.281-3.741-2.808-5.833-4.53a5.833,5.833,0,0,0-.562-.416l-.14.188c-.051,3.468.239,6.563.646,6.88-2.648.236-4.308-1.076-3.932-5,.562-5.732.368-8.868-.674-10.27,0,0,4.653-1.053,4.125,4.841-.028.309-.051.621-.073.932,2.412-4.473,7.183-9.214,7.453-12.356C388.53,217.9,390.5,219.392,390.364,223.461Z" transform="translate(-335.05 -194.42)"/>
              <path id="Path_1666" data-name="Path 1666" class="cls-3" d="M348,264.758c0,3.825,1.289,5.793,2.584,6.773a28.221,28.221,0,0,1,2-14.111C350.69,257.841,348,260.411,348,264.758Z" transform="translate(-344.357 -239.721)"/>
            </g>
          </g>
        </svg>
      </router-link>
    </div>

    <div class="nav__menu" :class="menuOpen +' '+ adapt">
      <div class="nav__list" @click="openMenu">
        <router-link v-for="(item, index) in menuList"
                     :key="index"
                     :to="item.url"
                     tag="nav"
                     class="nav-item"
                     active-class="nav-item--active">
          {{ item.text }}
        </router-link>
      </div>
      <div class="nav__actions nav__actions--inner">
        <a href="tel:+73833830069" class="link nav-phone">8 383 383 00 69</a>
        <a href="javascript:void(0)" class="btn nav-btn" @click="openPopup('form') (menuOpen = !menuOpen)">Опишите задачу</a>
      </div>
    </div>

    <div class="nav__actions">
      <a href="tel:+73833830069" class="link nav-phone">8 383 383 00 69</a>
      <a href="javascript:void(0)" class="btn nav-btn" @click="openPopup('form')">Опишите задачу</a>
    </div>

    <div class="burger" @click="openMenu" :adapt="adapt" :class="menuOpen">
      <span class="burger__line"></span>
    </div>

  </header>

  <transition name="popup">
    <popup v-show="modal == 'form'">
    </popup>
  </transition>

</div>
</template>

<script>

  import {mapGetters} from 'vuex';
  import {mapActions} from 'vuex';
  import Popup from './Popup.vue';

  export default {
    props: {
      adapt: ''
    },
    data() {
      return {
        menuNarrow: '',
        menuOpen: '',
        adaptMenu: 'activated'
      }
    },
    computed: {
      ...mapGetters('menu', {
        menuList: 'items'
      }),
      ...mapGetters('popup', {
        modal: 'modal'
      })
    },
    methods: {
      openMenu () {
        (this.menuOpen === 'open') ? this.menuOpen = '' : this.menuOpen = 'open';
        this.$emit('changedata', {
          adapt: this.adaptMenu
        });
      },
      closeMenu () {
        if (this.menuOpen === 'open') {
          this.menuOpen = '';
        }
      },
      ...mapActions('popup', {
        switchModal: 'switchModal'
      }),

      openPopup (modalName) {
        this.switchModal(modalName);
      }
    },
    components: {
      Popup
    }
  }

</script>

<style lang="scss">
	 @import '../style/blocks/_navigation.scss';
</style>
